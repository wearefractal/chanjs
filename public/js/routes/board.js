// Generated by CoffeeScript 1.3.3
(function() {

  define(["chan/server", "chan/notify", "templates/thread", "templates/reply"], function(server, notify, thread, reply) {
    return function(_arg, templ) {
      var id, page;
      id = _arg.id, page = _arg.page;
      page = (page ? parseInt(page) : 0);
      return server.ready(function() {
        return server.board(id, page, function(err, _arg1) {
          var board, t, threads, _i, _len, _results;
          board = _arg1.board, threads = _arg1.threads;
          if (err != null) {
            return notify.error("Error grabbing threads: " + err);
          }
          $("#content").html(templ({
            board: board
          }));
          $('#reply').html(reply({
            type: 'board',
            id: id
          }));
          _results = [];
          for (_i = 0, _len = threads.length; _i < _len; _i++) {
            t = threads[_i];
            _results.push($('#threadview').append(thread(t)));
          }
          return _results;
        });
      });
    };
  });

}).call(this);
